<Component ID="1189409360966" PageID="0" TemplateComponentID="0" CanBeActive="true" Version="3.1.0.0"><Description></Description><SelectedSkin>Default</SelectedSkin><DisplayName></DisplayName><Name></Name><BaseComponent Version="0"><![CDATA[//sqconldm102/iwadmin/main/livesite/component/WORKAREA/Content/GE-Money/Core/Left_Hand_Navigation.component]]></BaseComponent><ContainerProperties ID="" locked="false"><FixedLayoutArea ID="" index="0"/><CacheTime>-1</CacheTime><BGColor>#FFFFFF</BGColor><Background/><Width>160</Width><Height>200</Height><Top>0</Top><Left>0</Left><ZIndex>0</ZIndex><RenderInRuntime>true</RenderInRuntime></ContainerProperties><InternalProperties/><Locks><ContainerProperties locked="false" Changed="false"/><Properties locked="false" Changed="false"/><Data locked="false" Changed="false"/></Locks><Properties ComponentID="1189409360966"/><Data> 
  <External> 
    <Object Scope="local">com.interwoven.livesite.gemoney.LinkNavigation</Object>  
    <Method>leftNavigationXMLDocument</Method> 
  </External> 
</Data><Stylesheet Type="1" Default="true" PageType="" RequiredPageLayout="" ContentType="text/html"><Name>Default</Name><XSL>&lt;!DOCTYPE html-entities SYSTEM "http://www.interwoven.com/livesite/xsl/xsl-html.dtd"&gt;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
&lt;!-- Skin: Default (Default Browser Type) --&gt;
&lt;!-- 
################################################################################### 
Name of Component: Left_Hand_Navigation
Description:This XSL is used for Left Hand Navigation Preview Component.
Layout:Default Layout
Site-Map : The data are render from the site map
Author: Subramanian Selvaraj
History: &lt;Selvaraj&gt;|&lt;Date&gt;|&lt;Comments&gt;
################################################################################### 
--&gt;
&lt;xsl:output method="text"/&gt;
&lt;xsl:include href="http://www.interwoven.com/livesite/xsl/HTMLTemplates.xsl"/&gt;
&lt;xsl:include href="http://www.interwoven.com/livesite/xsl/StringTemplates.xsl"/&gt;
&lt;!-- &lt;xsl:include href="http://www.interwoven.com/livesite/custom/gemoney/Component.xsl"/&gt; --&gt;
&lt;xsl:template match="/"&gt;
    &lt;xsl:choose&gt;   
	&lt;xsl:when test="/Properties[@Admin='true']"&gt;
             &lt;div class="contentWrapper"&gt;
	     &lt;div class="leftNavigation" id="nav2"&gt;  
		&lt;!-- Left navigation her --&gt;
		&lt;ul id="navList"&gt;
		&lt;xsl:variable name="livesitepage" select="/Properties/Data/External/Parameters/Datum[@Name='iw-ls-page-name']" /&gt;
		&lt;xsl:variable name="livesitepath" select="/Properties/Data/External/Parameters/Datum[@Name='vpath']" /&gt; 
		&lt;xsl:variable name="rootName"&gt;&lt;xsl:value-of select="/Properties/Data/Result/site-map/segment/node/node[@visible-in-sitemap='true']/@id" /&gt;&lt;/xsl:variable&gt;
                  &lt;xsl:variable name="path"&gt;
                        &lt;xsl:call-template name="substring-last"&gt;
  			&lt;xsl:with-param name="input" select="$livesitepath"/&gt;
  			&lt;xsl:with-param name="substr" select="'.'"/&gt;
  		      &lt;/xsl:call-template&gt;
                   &lt;/xsl:variable&gt;
    &lt;xsl:choose&gt;
		&lt;xsl:when test="$path = 'component' or $path = 'template'"&gt;
			&lt;xsl:variable name="node_id" select="''"/&gt;
                  
				&lt;xsl:for-each select="/Properties/Data/Result/site-map/segment/node/node/node[@visible-in-sitemap='true']"&gt;
					&lt;xsl:if test="$rootName = parent::node/@id and link/value != ''"&gt; 
						&lt;li class="nav3Lvl"&gt;&lt;a href="#"&gt;&lt;xsl:value-of select="label" disable-output-escaping="yes" /&gt;&lt;/a&gt;&lt;/li&gt;
					&lt;/xsl:if&gt;
				&lt;/xsl:for-each&gt;
		&lt;/xsl:when&gt;
		   &lt;xsl:otherwise&gt;
                           &lt;xsl:apply-templates select="/Properties/Data/Result/result/node"/&gt;
                       &lt;/xsl:otherwise&gt;
                   &lt;/xsl:choose&gt;
		&lt;/ul&gt;	
		&lt;!-- other boxex from here --&gt;
	       &lt;/div&gt;
              &lt;/div&gt;
			&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;
                              &lt;xsl:variable name="livesitepage" select="/Properties/Data/External/Parameters/Datum[@Name='iw-ls-page-name']" /&gt;
                              &lt;xsl:variable name="varInclude"&gt;
                              &lt;xsl:value-of select="concat(substring-before($livesitepage,'/'), '/includes/lhn/')" /&gt;
                              &lt;/xsl:variable&gt;
                              &lt;xsl:variable name="varInclude"&gt;
                              &lt;xsl:value-of select="concat($varInclude, substring-after($livesitepage,'/'))" /&gt;
                              &lt;/xsl:variable&gt;
                               &lt;xsl:variable name="varInclude"&gt;
                              &lt;xsl:value-of select="concat($varInclude, '.html')" /&gt;
                              &lt;/xsl:variable&gt;
                              &lt;xsl:comment&gt;#include virtual="$URL_PREFIX/&lt;xsl:value-of select="$varInclude" /&gt;"&lt;/xsl:comment&gt;
                           &lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:template&gt;
&lt;xsl:template match="node"&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test="child::node[@visible-in-sitemap='true']"&gt;&lt;!-- only show as a folder if there are visible child nodes --&gt;

                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="@Level" /&gt;&lt;/xsl:variable&gt;
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat('nav',number($style)+2)" /&gt;&lt;/xsl:variable&gt;
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat($style,'Lvl')" /&gt;&lt;/xsl:variable&gt;
                             &lt;xsl:variable name="livesitepage" select="/Properties/Data/External/Parameters/Datum[@Name='iw-ls-page-name']" /&gt;
                               &lt;xsl:choose&gt;
                                &lt;xsl:when test="url = $livesitepage"&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                    &lt;xsl:value-of select="concat($style,' childSelected')" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                                &lt;/xsl:when&gt;
                                &lt;xsl:otherwise&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                &lt;xsl:value-of select="$style" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                              &lt;/xsl:otherwise&gt;
                              &lt;/xsl:choose&gt; 
                              &lt;xsl:apply-templates select="node"/&gt;
	&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="@Level" /&gt;&lt;/xsl:variable&gt;
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat('nav',number($style)+2)" /&gt;&lt;/xsl:variable&gt;
                               &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat($style,'Lvl')" /&gt;&lt;/xsl:variable&gt;
              	             &lt;xsl:variable name="livesitepage" select="/Properties/Data/External/Parameters/Datum[@Name='iw-ls-page-name']" /&gt;
                               &lt;xsl:choose&gt;
                                &lt;xsl:when test="url = $livesitepage"&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                    &lt;xsl:value-of select="concat($style,' childSelected')" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                                &lt;/xsl:when&gt;
                                &lt;xsl:otherwise&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                &lt;xsl:value-of select="$style" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                              &lt;/xsl:otherwise&gt;
                              &lt;/xsl:choose&gt; 
                              &lt;xsl:apply-templates select="node"/&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
&lt;xsl:template name="substring-last"&gt;
  &lt;xsl:param name="input"/&gt;
  &lt;xsl:param name="substr"/&gt;
  
  &lt;!-- Extract the string which comes after the first occurence --&gt;
  &lt;xsl:variable name="temp" select="substring-after($input,$substr)"/&gt;
  
  &lt;xsl:choose&gt;
  	&lt;xsl:when test="$substr and contains($temp,$substr)"&gt;
  		&lt;xsl:call-template name="substring-last"&gt;
  			&lt;xsl:with-param name="input" select="$temp"/&gt;
  			&lt;xsl:with-param name="substr" select="$substr"/&gt;
  		&lt;/xsl:call-template&gt;
  	&lt;/xsl:when&gt;
  	&lt;xsl:otherwise&gt;
  		&lt;xsl:value-of select="$temp"/&gt;
  	&lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt; 
&lt;xsl:template name="nodeDataLeft"&gt;
     &lt;xsl:choose&gt;
         &lt;xsl:when test="@Level != 1"&gt;
              &lt;xsl:choose&gt;
                 &lt;xsl:when test="url= ''"&gt;
                      &lt;a href="#"&gt; &lt;xsl:value-of select="label" /&gt; &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'page'"&gt;
                 &lt;a&gt;
                      &lt;xsl:if test="link/popup"&gt;
                      &lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                      &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                           &lt;xsl:attribute name="href"&gt;/&lt;xsl:value-of select="concat(url,'.page')" /&gt;
                           &lt;/xsl:attribute&gt;
                           &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'url'"&gt;
                 &lt;a&gt;
                      &lt;xsl:if test="link/popup"&gt;
           		&lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                           &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                            &lt;xsl:attribute name="href"&gt;&lt;xsl:value-of select="concat(url,'')" /&gt;
                            &lt;/xsl:attribute&gt;
                            &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                &lt;/xsl:when&gt;
             &lt;/xsl:choose&gt;
         &lt;/xsl:when&gt;
     &lt;xsl:otherwise&gt;
             &lt;xsl:choose&gt;
                 &lt;xsl:when test="url= ''"&gt;
                      &lt;a href="#" class="mainNav"&gt; &lt;xsl:value-of select="label" /&gt; &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'page'"&gt;
                 &lt;a class="mainNav"&gt;
                      &lt;xsl:if test="link/popup"&gt;
                      &lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                      &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                           &lt;xsl:attribute name="href"&gt;/&lt;xsl:value-of select="concat(url,'.page')" /&gt;
                           &lt;/xsl:attribute&gt;
                           &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'url'"&gt;
                 &lt;a class="mainNav"&gt;
                      &lt;xsl:if test="link/popup"&gt;
           		&lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                           &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                            &lt;xsl:attribute name="href"&gt;&lt;xsl:value-of select="concat(url,'')" /&gt;
                            &lt;/xsl:attribute&gt;
                            &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                &lt;/xsl:when&gt;
             &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</XSL></Stylesheet><Stylesheet Type="1" Default="false" PageType="" RequiredPageLayout="" ContentType="text/html"><Name>Preview</Name><XSL>&lt;!DOCTYPE html-entities SYSTEM "http://www.interwoven.com/livesite/xsl/xsl-html.dtd"&gt;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
&lt;!-- Skin: Default (Default Browser Type) --&gt;
&lt;!-- 
################################################################################### 
Name of Component: Left_Hand_Navigation
Description:This XSL is used for Left Hand Navigation Preview Component.
Layout:Default Layout
Site-Map : The data are render from the site map
Author: Subramanian Selvaraj
History: &lt;Selvaraj&gt;|&lt;Date&gt;|&lt;Comments&gt;
################################################################################### 
--&gt;
&lt;xsl:output method="text"/&gt;
&lt;xsl:include href="http://www.interwoven.com/livesite/xsl/HTMLTemplates.xsl"/&gt;
&lt;xsl:include href="http://www.interwoven.com/livesite/xsl/StringTemplates.xsl"/&gt;
&lt;!-- &lt;xsl:include href="http://www.interwoven.com/livesite/custom/gemoney/Component.xsl"/&gt; --&gt;
&lt;xsl:template match="/"&gt;
            &lt;div class="contentWrapper"&gt;
	     &lt;div class="leftNavigation" id="nav2"&gt;  
		&lt;!-- Left navigation her --&gt;
		&lt;ul id="navList"&gt;
		&lt;xsl:variable name="livesitepage" select="/Properties/Data/External/Parameters/Datum[@Name='iw-ls-page-name']" /&gt;
		&lt;xsl:variable name="livesitepath" select="/Properties/Data/External/Parameters/Datum[@Name='vpath']" /&gt; 
		&lt;xsl:variable name="rootName"&gt;&lt;xsl:value-of select="/Properties/Data/Result/site-map/segment/node/node[@visible-in-sitemap='true']/@id" /&gt;&lt;/xsl:variable&gt;
                  &lt;xsl:variable name="path"&gt;
                        &lt;xsl:call-template name="substring-last"&gt;
  			&lt;xsl:with-param name="input" select="$livesitepath"/&gt;
  			&lt;xsl:with-param name="substr" select="'.'"/&gt;
  		      &lt;/xsl:call-template&gt;
                   &lt;/xsl:variable&gt;
    &lt;xsl:choose&gt;
		&lt;xsl:when test="$path = 'component' or $path = 'template'"&gt;
			&lt;xsl:variable name="node_id" select="''"/&gt;
				&lt;xsl:for-each select="/Properties/Data/Result/site-map/segment/node/node/node[@visible-in-sitemap='true']"&gt;
					&lt;xsl:if test="$rootName = parent::node/@id and link/value != ''"&gt; 
						&lt;li class="nav3Lvl"&gt;&lt;a href="#"&gt;&lt;xsl:value-of select="label" disable-output-escaping="yes" /&gt;&lt;/a&gt;&lt;/li&gt;
					&lt;/xsl:if&gt;
				&lt;/xsl:for-each&gt;
		&lt;/xsl:when&gt;
		   &lt;xsl:otherwise&gt;
                           &lt;xsl:apply-templates select="/Properties/Data/Result/result/node"/&gt;
                       &lt;/xsl:otherwise&gt;
                   &lt;/xsl:choose&gt;
		&lt;/ul&gt;	
		&lt;!-- other boxex from here --&gt;
	       &lt;/div&gt;
              &lt;/div&gt;
	&lt;/xsl:template&gt;
&lt;xsl:template match="node"&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test="child::node[@visible-in-sitemap='true']"&gt;&lt;!-- only show as a folder if there are visible child nodes --&gt;
	
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="@Level" /&gt;&lt;/xsl:variable&gt;
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat('nav',number($style)+2)" /&gt;&lt;/xsl:variable&gt;
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat($style,'Lvl')" /&gt;&lt;/xsl:variable&gt;
                                          	             &lt;xsl:variable name="livesitepage" select="/Properties/Data/External/Parameters/Datum[@Name='iw-ls-page-name']" /&gt;
                               &lt;xsl:variable name="strpage"&gt;
                               &lt;xsl:value-of select="concat(substring-before($livesitepage,'/includes/lhn/'),'/')" /&gt;
                               &lt;/xsl:variable&gt;
                               &lt;xsl:variable name="livesitepage"&gt;
                               &lt;xsl:value-of select="substring-after($livesitepage,'/includes/lhn/')" /&gt;
                               &lt;/xsl:variable&gt;
                               &lt;xsl:variable name="livesitepage"&gt;
                               &lt;xsl:value-of select="concat($strpage,$livesitepage)" /&gt;
                               &lt;/xsl:variable&gt;

                               &lt;xsl:choose&gt;
                                &lt;xsl:when test="url = $livesitepage"&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                    &lt;xsl:value-of select="concat($style,' childSelected')" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                                &lt;/xsl:when&gt;
                                &lt;xsl:otherwise&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                &lt;xsl:value-of select="$style" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                              &lt;/xsl:otherwise&gt;
                              &lt;/xsl:choose&gt;
                           &lt;xsl:apply-templates select="node"/&gt;
	&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
	
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="@Level" /&gt;&lt;/xsl:variable&gt;
                              &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat('nav',number($style)+2)" /&gt;&lt;/xsl:variable&gt;
                               &lt;xsl:variable name = "style"&gt;&lt;xsl:value-of select="concat($style,'Lvl')" /&gt;&lt;/xsl:variable&gt;
              	             &lt;xsl:variable name="livesitepage" select="/Properties/Data/External/Parameters/Datum[@Name='iw-ls-page-name']" /&gt;
                               &lt;xsl:variable name="strpage"&gt;
                               &lt;xsl:value-of select="concat(substring-before($livesitepage,'/includes/lhn/'),'/')" /&gt;
                               &lt;/xsl:variable&gt;
                               &lt;xsl:variable name="livesitepage"&gt;
                               &lt;xsl:value-of select="substring-after($livesitepage,'/includes/lhn/')" /&gt;
                               &lt;/xsl:variable&gt;
                               &lt;xsl:variable name="livesitepage"&gt;
                               &lt;xsl:value-of select="concat($strpage,$livesitepage)" /&gt;
                               &lt;/xsl:variable&gt;

                               &lt;xsl:choose&gt;
                                &lt;xsl:when test="url = $livesitepage"&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                    &lt;xsl:value-of select="concat($style,' childSelected')" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                                &lt;/xsl:when&gt;
                                &lt;xsl:otherwise&gt;
                                &lt;li&gt;
                                &lt;xsl:attribute name="class"&gt;
                                &lt;xsl:value-of select="$style" /&gt;
                               &lt;/xsl:attribute&gt;
                              &lt;xsl:call-template name="nodeDataLeft"/&gt;&lt;/li&gt;
                              &lt;/xsl:otherwise&gt;
                              &lt;/xsl:choose&gt;                               &lt;xsl:apply-templates select="node"/&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
&lt;xsl:template name="substring-last"&gt;
  &lt;xsl:param name="input"/&gt;
  &lt;xsl:param name="substr"/&gt;
  
  &lt;!-- Extract the string which comes after the first occurence --&gt;
  &lt;xsl:variable name="temp" select="substring-after($input,$substr)"/&gt;
  
  &lt;xsl:choose&gt;
  	&lt;xsl:when test="$substr and contains($temp,$substr)"&gt;
  		&lt;xsl:call-template name="substring-last"&gt;
  			&lt;xsl:with-param name="input" select="$temp"/&gt;
  			&lt;xsl:with-param name="substr" select="$substr"/&gt;
  		&lt;/xsl:call-template&gt;
  	&lt;/xsl:when&gt;
  	&lt;xsl:otherwise&gt;
  		&lt;xsl:value-of select="$temp"/&gt;
  	&lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt; 
&lt;xsl:template name="nodeDataLeft"&gt;
     &lt;xsl:choose&gt;
         &lt;xsl:when test="@Level != 1"&gt;
              &lt;xsl:choose&gt;
                 &lt;xsl:when test="url= ''"&gt;
                      &lt;a href="#"&gt; &lt;xsl:value-of select="label" /&gt; &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'page'"&gt;
                 &lt;a&gt;
                      &lt;xsl:if test="link/popup"&gt;
                      &lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                      &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                           &lt;xsl:attribute name="href"&gt;/&lt;xsl:value-of select="concat(url,'.page')" /&gt;
                           &lt;/xsl:attribute&gt;
                           &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'url'"&gt;
                 &lt;a&gt;
                      &lt;xsl:if test="link/popup"&gt;
           		&lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                           &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                            &lt;xsl:attribute name="href"&gt;&lt;xsl:value-of select="concat(url,'')" /&gt;
                            &lt;/xsl:attribute&gt;
                            &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                &lt;/xsl:when&gt;
             &lt;/xsl:choose&gt;
         &lt;/xsl:when&gt;
     &lt;xsl:otherwise&gt;
             &lt;xsl:choose&gt;
                 &lt;xsl:when test="url= ''"&gt;
                      &lt;a href="#" class="mainNav"&gt; &lt;xsl:value-of select="label" /&gt; &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'page'"&gt;
                 &lt;a class="mainNav"&gt;
                      &lt;xsl:if test="link/popup"&gt;
                      &lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                      &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                           &lt;xsl:attribute name="href"&gt;/&lt;xsl:value-of select="concat(url,'.page')" /&gt;
                           &lt;/xsl:attribute&gt;
                           &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                 &lt;/xsl:when&gt;
                 &lt;xsl:when test="url/@type = 'url'"&gt;
                 &lt;a class="mainNav"&gt;
                      &lt;xsl:if test="link/popup"&gt;
           		&lt;xsl:attribute name="onclick"&gt;window.open('$PAGE_LINK[&lt;xsl:value-of select="url"/&gt;]&lt;xsl:text/&gt;', '&lt;xsl:value-of select="link/popup/targetWindowName"/&gt;', '&lt;xsl:value-of select="link/popup/windowFeatures"/&gt;') 
                           &lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:if test="not(link/popup)"&gt;
                            &lt;xsl:attribute name="href"&gt;&lt;xsl:value-of select="concat(url,'')" /&gt;
                            &lt;/xsl:attribute&gt;
                            &lt;xsl:attribute name="target"&gt;&lt;xsl:value-of select="url/@target"/&gt;&lt;/xsl:attribute&gt;
                      &lt;/xsl:if&gt;
                      &lt;xsl:value-of select="label"/&gt;
                 &lt;/a&gt;
                &lt;/xsl:when&gt;
             &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;</XSL></Stylesheet></Component>
